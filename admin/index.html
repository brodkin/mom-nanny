<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nanny - Admin Dashboard</title>
  
  <!-- Preload critical resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/admin.css">
  <link rel="stylesheet" href="css/dashboard.css">
  
  <!-- Meta tags -->
  <meta name="description" content="Admin dashboard for Nanny compassionate companion system">
  <meta name="theme-color" content="#6366f1">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%236366f1'/><g transform='translate(50,50) scale(1.5)'><path d='M12 2C8.5 2 6 4.5 6 7.5C6 8.2 6.1 8.9 6.3 9.5C5.8 9.3 5.3 9.2 4.8 9.2C3.8 9.2 3 10 3 11C3 12 3.8 12.8 4.8 12.8C5.3 12.8 5.8 12.7 6.3 12.5C6.5 12.8 6.8 13.1 7.1 13.3C7.5 13.6 8 13.8 8.5 13.9V14.5C8.5 15.3 9.2 16 10 16H14C14.8 16 15.5 15.3 15.5 14.5V13.9C16 13.8 16.5 13.6 16.9 13.3C17.2 13.1 17.5 12.8 17.7 12.5C18.2 12.7 18.7 12.8 19.2 12.8C20.2 12.8 21 12 21 11C21 10 20.2 9.2 19.2 9.2C18.7 9.2 18.2 9.3 17.7 9.5C17.9 8.9 18 8.2 18 7.5C18 4.5 15.5 2 12 2Z' fill='white'/><ellipse cx='12' cy='10' rx='4.5' ry='4' fill='%236366f1'/><path d='M9 14.5L10.5 15.5L12 15L13.5 15.5L15 14.5' stroke='white' stroke-width='0.5' fill='none'/><path d='M8 16C7.5 16 7 16.5 7 17V20C7 20.5 7.5 21 8 21H16C16.5 21 17 20.5 17 20V17C17 16.5 16.5 16 16 16' fill='white'/><path d='M10 17H14V20.5C14 20.8 13.8 21 13.5 21H10.5C10.2 21 10 20.8 10 20.5V17Z' fill='%236366f1'/><ellipse cx='6.5' cy='18' rx='1.5' ry='2.5' transform='rotate(-20 6.5 18)' fill='white'/><ellipse cx='17.5' cy='18' rx='1.5' ry='2.5' transform='rotate(20 17.5 18)' fill='white'/></g></svg>">
  
  <!-- Prevent FOUC -->
  <style>
    body { visibility: hidden; }
    .js body { visibility: visible; }
  </style>
  <script>document.documentElement.className = 'js';</script>
</head>
<body>
  <!-- Admin Layout Container -->
  <div class="admin-layout">
    
    <!-- Sidebar -->
    <aside class="admin-sidebar custom-scrollbar" role="navigation" aria-label="Main navigation">
      <!-- Brand -->
      <div class="sidebar-brand">
        <div class="brand-logo" aria-label="Nanny Logo">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
            <!-- Hair bun and sides -->
            <circle cx="12" cy="6" r="4.5" fill="white"/>
            <circle cx="7" cy="8" r="2" fill="white"/>
            <circle cx="17" cy="8" r="2" fill="white"/>
            
            <!-- Face (negative space/cutout) -->
            <circle cx="12" cy="9.5" r="3.2" fill="var(--color-primary)"/>
            
            <!-- Collar -->
            <path d="M9 13L12 14L15 13" stroke="white" stroke-width="1" fill="none"/>
            
            <!-- Body/Uniform -->
            <rect x="8" y="14" width="8" height="8" rx="1" fill="white"/>
            
            <!-- Apron -->
            <rect x="10" y="15.5" width="4" height="6" rx="0.5" fill="var(--color-primary)"/>
            
            <!-- Arms -->
            <ellipse cx="6" cy="17" rx="1.2" ry="2.5" fill="white"/>
            <ellipse cx="18" cy="17" rx="1.2" ry="2.5" fill="white"/>
          </svg>
        </div>
        <div class="brand-text">Nanny</div>
      </div>

      <!-- Navigation Menu -->
      <nav class="nav-menu">
        <ul role="list">
          <li class="nav-item">
            <a href="#dashboard" class="nav-link active" data-page="dashboard" onclick="loadDashboard()">
              <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5v4M16 5v4"/>
              </svg>
              <span class="nav-text">Dashboard</span>
            </a>
          </li>
          
          <li class="nav-item">
            <a href="#calls" class="nav-link" data-page="calls">
              <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              <span class="nav-text">Call Logs</span>
            </a>
          </li>
          
          <li class="nav-item">
            <a href="#conversations" class="nav-link" data-page="conversations">
              <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
              </svg>
              <span class="nav-text">Conversations</span>
            </a>
          </li>
          
          <li class="nav-item">
            <a href="#analytics" class="nav-link" data-page="analytics">
              <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
              <span class="nav-text">Analytics</span>
            </a>
          </li>
          
          <li class="nav-item">
            <a href="#users" class="nav-link" data-page="users">
              <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"/>
              </svg>
              <span class="nav-text">Users</span>
            </a>
          </li>
          
          <li class="nav-item">
            <a href="#system" class="nav-link" data-page="system">
              <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
              <span class="nav-text">System Status</span>
            </a>
          </li>
          
          <li class="nav-item">
            <a href="#settings" class="nav-link" data-page="settings">
              <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
              <span class="nav-text">Settings</span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- Header -->
    <header class="admin-header" role="banner">
      <div class="header-left">
        <!-- Sidebar Toggle -->
        <button 
          id="sidebar-toggle" 
          class="sidebar-toggle btn-icon"
          aria-label="Toggle sidebar"
          data-tooltip="Toggle Sidebar (Ctrl+B)"
        >
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>

        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <div class="breadcrumb-item">
            <a href="#" class="breadcrumb-link">Home</a>
          </div>
          <div class="breadcrumb-item">
            <span class="breadcrumb-current">Dashboard</span>
          </div>
        </nav>
      </div>

      <div class="header-right">
        <!-- Global Search -->
        <div class="global-search">
          <div class="search-input">
            <svg class="search-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
            <input 
              type="text" 
              id="search-input"
              placeholder="Search... (Ctrl+K)"
              autocomplete="off"
            >
          </div>
        </div>

        <!-- Theme Toggle -->
        <button 
          id="theme-toggle" 
          class="theme-toggle"
          aria-label="Toggle dark mode"
          data-tooltip="Toggle Theme (Ctrl+Shift+T)"
        >
          <!-- Sun Icon (for light mode) -->
          <svg class="theme-icon theme-icon-light" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
          </svg>
          <!-- Moon Icon (for dark mode) -->
          <svg class="theme-icon theme-icon-dark" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
          </svg>
        </button>

        <!-- Notifications -->
        <button class="btn-icon" aria-label="View notifications" data-tooltip="Notifications">
          <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
          </svg>
        </button>

        <!-- User Profile -->
        <div class="user-profile dropdown">
          <div class="avatar avatar-md">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" alt="Admin user" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
            <div style="display: none;">AD</div>
          </div>
          <div class="user-info">
            <div class="user-name">Admin User</div>
            <div class="user-role">System Administrator</div>
          </div>
          <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <polyline points="6,9 12,15 18,9"/>
          </svg>
          
          <!-- Dropdown Menu -->
          <div class="dropdown-menu">
            <a href="#profile" class="dropdown-item">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: var(--space-2)">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
              </svg>
              Profile Settings
            </a>
            <a href="#preferences" class="dropdown-item">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: var(--space-2)">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"/>
              </svg>
              Preferences
            </a>
            <a href="#help" class="dropdown-item">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: var(--space-2)">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              Help & Support
            </a>
            <hr style="margin: var(--space-2) 0; border: none; border-top: 1px solid var(--border-primary);">
            <a href="#logout" class="dropdown-item" style="color: var(--color-error)">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="margin-right: var(--space-2)">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
              </svg>
              Sign Out
            </a>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="admin-main" role="main" id="main-content">
      <!-- Welcome Section -->
      <section class="dashboard-welcome animate-fade-in">
        <div class="welcome-content">
          <h1 class="welcome-title">Welcome back, Admin!</h1>
          <p class="welcome-subtitle">
            Monitor and manage your compassionate AI companion system. 
            Everything is running smoothly and ready to help families in need.
          </p>
          <div class="welcome-actions">
            <a href="#calls" class="btn btn-secondary">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
              View Recent Calls
            </a>
            <a href="#analytics" class="btn btn-outline" style="border-color: rgba(255,255,255,0.3); color: white;">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
              View Analytics
            </a>
            <button onclick="window.adminDashboard.testToastPositioning()" class="btn btn-outline" style="border-color: rgba(255,255,255,0.3); color: white;">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
              </svg>
              Test Notifications
            </button>
          </div>
        </div>
      </section>

      <!-- Stats Overview -->
      <section class="content-section">
        <div class="section-header">
          <div>
            <h2 class="section-title">System Overview</h2>
            <p class="section-subtitle">Real-time statistics and system health</p>
          </div>
          <div class="section-actions">
            <button class="btn btn-ghost">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Refresh
            </button>
            <button class="btn btn-primary" data-modal="system-details">
              View Details
            </button>
          </div>
        </div>

        <div class="stats-grid animate-stagger">
          <!-- Total Calls -->
          <div class="stat-card hover-lift">
            <div class="stat-value" data-stat="total-calls">0</div>
            <div class="stat-label">Total Calls</div>
            <div class="stat-trend">
              <span class="trend-badge trend-up">
                <svg class="trend-arrow" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <path d="M6 3L11 8L9.5 8L9.5 11L8.5 11L8.5 8L7 8L6 8L5 8L3.5 8L3.5 11L2.5 11L2.5 8L1 8L6 3Z"/>
                </svg>
                <span class="trend-value">12%</span>
              </span>
              <span class="trend-text">from last month</span>
            </div>
          </div>

          <!-- Active Sessions -->
          <div class="stat-card hover-lift">
            <div class="stat-value" data-stat="active-sessions">0</div>
            <div class="stat-label">Active Sessions</div>
            <div class="stat-trend">
              <span class="trend-badge trend-up">
                <svg class="trend-arrow" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <path d="M6 3L11 8L9.5 8L9.5 11L8.5 11L8.5 8L7 8L6 8L5 8L3.5 8L3.5 11L2.5 11L2.5 8L1 8L6 3Z"/>
                </svg>
                <span class="trend-value">+3</span>
              </span>
              <span class="trend-text">new sessions</span>
            </div>
          </div>

          <!-- System Uptime -->
          <div class="stat-card hover-lift">
            <div class="stat-value" data-stat="system-uptime">0</div>
            <div class="stat-label">Uptime</div>
            <div class="stat-trend">
              <span class="trend-badge trend-stable">
                <svg class="trend-arrow" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <path d="M2 6L10 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span class="trend-value">99.9%</span>
              </span>
              <span class="trend-text">excellent performance</span>
            </div>
          </div>

          <!-- Response Time -->
          <div class="stat-card hover-lift">
            <div class="stat-value" data-stat="response-time">0</div>
            <div class="stat-label">Avg Response Time</div>
            <div class="stat-trend">
              <span class="trend-badge trend-down">
                <svg class="trend-arrow" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                  <path d="M6 9L1 4L2.5 4L2.5 1L3.5 1L3.5 4L5 4L6 4L7 4L8.5 4L8.5 1L9.5 1L9.5 4L11 4L6 9Z"/>
                </svg>
                <span class="trend-value">15ms</span>
              </span>
              <span class="trend-text">improvement</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Quick Actions -->
      <section class="content-section">
        <div class="section-header">
          <div>
            <h2 class="section-title">Quick Actions</h2>
            <p class="section-subtitle">Common administrative tasks</p>
          </div>
        </div>

        <div class="quick-actions animate-stagger">
          <a href="#calls/new" class="quick-action">
            <div class="quick-action-icon">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
            </div>
            <h3 class="quick-action-title">Test Call</h3>
            <p class="quick-action-description">Initiate a test call to verify system functionality</p>
          </a>

          <a href="#users/add" class="quick-action">
            <div class="quick-action-icon">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
              </svg>
            </div>
            <h3 class="quick-action-title">Add User</h3>
            <p class="quick-action-description">Register a new user in the system</p>
          </a>

          <a href="#settings" class="quick-action">
            <div class="quick-action-icon">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
            <h3 class="quick-action-title">System Settings</h3>
            <p class="quick-action-description">Configure system preferences and parameters</p>
          </a>

          <a href="#reports" class="quick-action">
            <div class="quick-action-icon">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
            </div>
            <h3 class="quick-action-title">Generate Report</h3>
            <p class="quick-action-description">Create detailed system usage reports</p>
          </a>
        </div>
      </section>

      <!-- Dashboard Content Grid -->
      <div class="dashboard-grid">
        <!-- Recent Activity -->
        <div class="card animate-fade-in-left">
          <div class="card-header">
            <div>
              <h3 class="card-title">Recent Activity</h3>
              <p class="card-subtitle">Latest system events and user interactions</p>
            </div>
            <div class="status-indicator status-online">
              <span class="status-dot"></span>
              Live
            </div>
          </div>
          <div class="activity-feed">
            <div class="activity-list">
              <!-- Activity items will be loaded by JavaScript -->
              <div class="empty-state">
                <div class="empty-icon">📋</div>
                <h4 class="empty-title">Loading activity...</h4>
                <p class="empty-description">Fetching recent system activity</p>
              </div>
            </div>
          </div>
        </div>

        <!-- System Health -->
        <div class="card animate-fade-in-right">
          <div class="card-header">
            <div>
              <h3 class="card-title">System Health</h3>
              <p class="card-subtitle">Current system status and diagnostics</p>
            </div>
            <button class="btn btn-ghost btn-sm">
              <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
              </svg>
              Refresh
            </button>
          </div>
          <div class="card-body">
            <!-- CPU Usage -->
            <div class="space-y-4">
              <div>
                <div class="flex justify-between items-center" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2);">
                  <span class="text-sm font-medium">CPU Usage</span>
                  <span class="text-sm text-secondary">24%</span>
                </div>
                <div class="progress">
                  <div class="progress-bar" style="width: 24%"></div>
                </div>
              </div>

              <!-- Memory Usage -->
              <div>
                <div class="flex justify-between items-center" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2);">
                  <span class="text-sm font-medium">Memory Usage</span>
                  <span class="text-sm text-secondary">67%</span>
                </div>
                <div class="progress">
                  <div class="progress-bar" style="width: 67%"></div>
                </div>
              </div>

              <!-- Disk Usage -->
              <div>
                <div class="flex justify-between items-center" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2);">
                  <span class="text-sm font-medium">Disk Usage</span>
                  <span class="text-sm text-secondary">45%</span>
                </div>
                <div class="progress">
                  <div class="progress-bar" style="width: 45%"></div>
                </div>
              </div>

              <!-- Network Activity -->
              <div>
                <div class="flex justify-between items-center" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-2);">
                  <span class="text-sm font-medium">Network Activity</span>
                  <span class="text-sm text-secondary">High</span>
                </div>
                <div class="progress">
                  <div class="progress-bar" style="width: 89%"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <span class="text-xs text-secondary">Last updated: 2 minutes ago</span>
            <button class="btn btn-outline btn-sm">View Details</button>
          </div>
        </div>
      </div>

      <!-- Additional Content Sections -->
      <section class="content-section">
        <div class="section-header">
          <div>
            <h2 class="section-title">Call Management</h2>
            <p class="section-subtitle">Monitor and manage ongoing conversations</p>
          </div>
          <div class="section-actions">
            <button class="btn btn-outline">Export Data</button>
            <button class="btn btn-primary">View All Calls</button>
          </div>
        </div>

        <div class="card">
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Caller</th>
                  <th>Duration</th>
                  <th>Status</th>
                  <th>Sentiment</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>2:34 PM</td>
                  <td>
                    <div class="flex items-center gap-2" style="display: flex; align-items: center; gap: var(--space-2);">
                      <div class="avatar avatar-sm">M</div>
                      <span>Mary Johnson</span>
                    </div>
                  </td>
                  <td>12:45</td>
                  <td>
                    <span class="badge badge-success">Active</span>
                  </td>
                  <td>
                    <span class="badge badge-info">Calm</span>
                  </td>
                  <td>
                    <div class="flex gap-2" style="display: flex; gap: var(--space-2);">
                      <button class="btn btn-ghost btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                      </button>
                      <button class="btn btn-ghost btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>1:58 PM</td>
                  <td>
                    <div class="flex items-center gap-2" style="display: flex; align-items: center; gap: var(--space-2);">
                      <div class="avatar avatar-sm">R</div>
                      <span>Robert Smith</span>
                    </div>
                  </td>
                  <td>8:23</td>
                  <td>
                    <span class="badge badge-neutral">Completed</span>
                  </td>
                  <td>
                    <span class="badge badge-success">Positive</span>
                  </td>
                  <td>
                    <div class="flex gap-2" style="display: flex; gap: var(--space-2);">
                      <button class="btn btn-ghost btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                      </button>
                      <button class="btn btn-ghost btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>1:22 PM</td>
                  <td>
                    <div class="flex items-center gap-2" style="display: flex; align-items: center; gap: var(--space-2);">
                      <div class="avatar avatar-sm">D</div>
                      <span>Dorothy Williams</span>
                    </div>
                  </td>
                  <td>15:12</td>
                  <td>
                    <span class="badge badge-neutral">Completed</span>
                  </td>
                  <td>
                    <span class="badge badge-warning">Anxious</span>
                  </td>
                  <td>
                    <div class="flex gap-2" style="display: flex; gap: var(--space-2);">
                      <button class="btn btn-ghost btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                      </button>
                      <button class="btn btn-ghost btn-sm">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="admin-footer" role="contentinfo">
      <div class="footer-left">
        <span>&copy; 2024 Mom &amp; Nanny AI. Compassionate care technology.</span>
      </div>
      <div class="footer-right">
        <div class="status-indicator status-online">
          <span class="status-dot"></span>
          System Online
        </div>
      </div>
    </footer>

    <!-- Mobile Sidebar Overlay -->
    <div class="layout-overlay"></div>
  </div>

  <!-- Sample Modal -->
  <div id="system-details" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">System Details</h3>
        <button class="modal-close">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p>Detailed system information and diagnostics would be displayed here.</p>
        
        <div class="space-y-4" style="margin-top: var(--space-6);">
          <div>
            <strong>Server Version:</strong> v2.1.4
          </div>
          <div>
            <strong>Last Restart:</strong> 3 days ago
          </div>
          <div>
            <strong>Active Connections:</strong> 23
          </div>
          <div>
            <strong>Total Memory:</strong> 16 GB
          </div>
          <div>
            <strong>Available Storage:</strong> 245 GB
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost modal-close">Close</button>
        <button class="btn btn-primary">Export Report</button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/admin.js"></script>
  <script src="js/dashboard-real.js"></script>
  
  <!-- Dashboard Load Function -->
  <script>
    function loadDashboard() {
      const content = document.getElementById('main-content');
      if (!content) return;
      
      // Hide default content and show real dashboard
      const defaultContent = document.querySelector('.dashboard-welcome');
      const realDashboard = document.getElementById('real-dashboard-content');
      
      if (defaultContent) defaultContent.style.display = 'none';
      if (realDashboard) {
        realDashboard.style.display = 'block';
      } else {
        // Initialize the dashboard which will create the content
        if (window.dashboardReal) {
          window.dashboardReal.createDashboardStructure();
          window.dashboardReal.loadAllData();
        } else {
          // Show loading state until dashboard is ready
          content.innerHTML = `
            <div id="dashboard-loading" style="text-align: center; padding: 3rem; color: var(--text-secondary);">
              <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto 1rem;"></div>
              <h2>Initializing Dashboard...</h2>
              <p>Setting up real-time data visualization for compassionate care monitoring</p>
            </div>
          `;
        }
      }
    }
    
    // Auto-load dashboard on page load if dashboard is active
    document.addEventListener('DOMContentLoaded', function() {
      const activeNavLink = document.querySelector('.nav-link.active');
      if (activeNavLink && activeNavLink.getAttribute('data-page') === 'dashboard') {
        // Small delay to ensure all assets are loaded
        setTimeout(() => {
          loadDashboard();
        }, 1000);
      }
    });
    
    // Add click handlers for all nav links to properly manage active states
    document.addEventListener('DOMContentLoaded', function() {
      const navLinks = document.querySelectorAll('.nav-link');
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          // Update active states
          navLinks.forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          
          // Update breadcrumb
          const breadcrumbCurrent = document.querySelector('.breadcrumb-current');
          if (breadcrumbCurrent) {
            const pageTitle = this.querySelector('.nav-text').textContent;
            breadcrumbCurrent.textContent = pageTitle;
          }
          
          // Handle dashboard loading
          if (this.getAttribute('data-page') === 'dashboard') {
            e.preventDefault();
            loadDashboard();
          }
        });
      });
    });
  </script>
</body>
</html>